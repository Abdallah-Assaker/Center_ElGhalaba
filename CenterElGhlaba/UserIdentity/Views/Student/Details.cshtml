@using Center_ElGhalaba.Models;
@model Student
@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_PageLayout.cshtml";
    List<Lesson> lessons = ViewBag.Lessons;

    Pager pager = new Pager();
    int pageNO = 0;
    if (ViewBag.Pager != null)
    {
        pager = ViewBag.Pager;
        pageNO = pager.CurrentPage;

    }
}
<style>
    .card {
        color: black;
        width: 350px;
        border-radius: 10px;
        background: linear-gradient(145deg, white, #gray);
        box-shadow: 0px 25px 60px rgba(66,85,164,0.06);
        border: none
    }

    .neo-button {
        width: 40px;
        height: 40px;
        outline: 0 !important;
        cursor: pointer;
        color: #fff;
        font-size: 15px;
        border: none;
        margin-right: 10px;
        border-radius: 50%;
        background: linear-gradient(145deg, #9a40a9, #b74cc9);
        box-shadow: inset 20px 20px 60px #913ca0, inset -20px -20px 60px #c552d8;
    }

    .num {
        color: black !important;
    }

    .line {
        color: #fff;
    }

    .neo-button:active {
        border-radius: 50%;
        background: #AB47BC;
        box-shadow: 28px 28px 57px #933da2, -28px -28px 57px #c351d6;
    }

    .fa-facebook {
        color: #3b5998
    }

    .profile_button {
        color: #fff;
        padding: 10px;
        border: none;
        outline: 0 !important;
        border-radius: 50px;
        background: #AB47BC;
    }

        .profile_button:hover {
            cursor: pointer;
            background-color: orangered
        }

</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">

<main>
    <!--? slider Area Start-->
    <section class="slider-area " style="background-color:cadetblue">
        <div class="slider-active" style="background: linear-gradient(rgb(234, 226, 254) 0%, rgb(163, 118, 255) 1%, rgb(234, 104, 255) 98%, rgb(236, 125, 254) 99%, rgb(243, 243, 250) 99%, rgb(244, 245, 250) 100%); ;height:300px;">
            <!-- Single Slider -->
            <div class="single-slider slider-height d-flex align-items-center">
            </div>
        </div>
    </section>
    <!-- ? services-area -->
    <div class="services-area">
        <div class="row justify-content-sm-center" style="background-color:white;border:none">


            <div class="container d-flex justify-content-center">
                <div class="card p-3 py-4">
                    <div class="text-center">
                        @if (Model.AppUser.Image != null)
                        {

                            <img class="avatar rounded-circle" alt="profile" src="data:image/*;base64,@(Convert.ToBase64String(Model.AppUser.Image))" />


                        }
                        else
                        {
                            <img src="https://i.imgur.com/stD0Q19.jpg" width="100" class="rounded-circle">
                        }


                        <h3 class="mt-2">@Model.AppUser.FirstName @Model.AppUser.LastName</h3>




                        <div class="col">
                            <h5>@Model.AppUser.Email.ToString()</h5>

                        </div>
                        <div class="col">
                            <h5>@Model.AppUser.PhoneNumber</h5>

                        </div>
                        <span class="mt-1 clearfix">@Model.AppUser.Address.ToString()</span>


                        <div class="profile mt-5">

                            <button class="profile_button px-5">Edit profile</button>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Courses area start -->
    <div class="courses-area section-padding40 fix">
        <div class="row justify-content-center">
            <div class="col-xl-12 col-lg-8">
                <div class="section-tittle text-center mb-55">
                    <h2>Your Lessons</h2>
                    <div class="row justify-content-center" id="LessonContainer">
                        @foreach (var item in lessons)
                        {
                            <div class="col-3">
                                <div class="properties properties2 mb-30">
                                    <div class="properties__card">
                                        <div class="properties__img overlay1">
                                            <a href="#"><img src="~/assets/img/gallery/featured1.png" alt=""></a>
                                        </div>
                                        <div class="properties__caption">
                                            <h3><a href="#">@item.Title</a></h3>
                                            <div class="properties__footer d-flex justify-content-between align-items-center">

                                                <li class="bi bi-heart-fill" style="color:red">@item.Likes</li>
                                                <p>@item.Price EGP</p>


                                            </div>
                                            <a href="#" class="border-btn border-btn2">Watch Lesson</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }

                    </div>

                </div>
            </div>
        </div>
    </div>
    <partial name="_Pager" model="@pager"></partial>

    <!-- Footer End-->
</main>

<script>
    function GetLessons(value) {
        console.log(value);
        var page = parseInt(value)
        $("#LessonContainer").html("");
        console.log("hello");

        console.log(page);

        $.ajax(
            {
                url: "/Student/GetStudentLessons",
                data: { "id": @Model.ID, "pg": page },
                success: function (result) {
                    console.log(result);
                    for (let item of result) {
                        addCard(item.title, item.likes, item.price)


                    }
                }
            });
    }
    function addCard(title, NOLikes, price) {


        const cardParent = document.querySelector("#LessonContainer")

        const colDiv = document.createElement('div')
        colDiv.className = 'col-3'

        cardParent.appendChild(colDiv)

        const card = document.createElement('div')
        card.classList.add('properties', 'properties2', 'mb-30')

        colDiv.appendChild(card)

        const prpertiesCardDiv = document.createElement('div')
        prpertiesCardDiv.classList.add('properties__card')

        card.appendChild(prpertiesCardDiv)

        const imgDiv = document.createElement('div')
        imgDiv.classList.add('properties__img', 'overlay1')



        const img = document.createElement('img')
        img.classList.add('img-fluid')
        img.src = '/assets/img/gallery/featured1.png'

        const propertiescaptionDiv = document.createElement('div')
        propertiescaptionDiv.classList.add('properties__caption')

        const lessonTitle = document.createElement("h3")
        lessonTitle.innerText = title

        prpertiesCardDiv.appendChild(img)
        prpertiesCardDiv.appendChild(propertiescaptionDiv)

        propertiescaptionDiv.appendChild(lessonTitle);

        const LikesDiv = document.createElement('div')
        LikesDiv.classList.add('properties__footer', 'd-flex', 'justify-content-between', 'align-items-center')

        const likies = document.createElement('li')
        likies.classList.add('bi', 'bi-heart-fill')
        likies.style.color = 'red'
        likies.innerText = NOLikes;

        const NoLikes = document.createElement("p")
        NoLikes.innerText = price + ' EGP';


        propertiescaptionDiv.appendChild(LikesDiv)
        LikesDiv.appendChild(likies);
        LikesDiv.appendChild(NoLikes)


        const ViewCourseBtn = document.createElement('a')
        ViewCourseBtn.classList.add('border-btn', 'border-btn2')
        ViewCourseBtn.innerText = 'Watch Lesson'

        propertiescaptionDiv.appendChild(ViewCourseBtn);


    }
</script>








